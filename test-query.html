<!DOCTYPE html>
<html>
<head>
    <title>u-query Test</title>
    <style>
        .test { background: yellow; margin: 5px; padding: 10px; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <h1>u-query Test</h1>
    
    <div class="test" id="test1">Test Element 1</div>
    <div class="test" id="test2">Test Element 2</div>
    <div class="test hidden" id="test3">Test Element 3 (hidden)</div>
    
    <button onclick="runTests()">Run Tests</button>
    <div id="results"></div>

    <script src="lib/u-query.js"></script>
    <script>
        function runTests() {
            const results = [];
            
            // Test basic selection
            const elements = $('.test');
            results.push(`Selected ${elements.length} elements`);
            
            // Test chaining
            elements.css('border', '2px solid red').addClass('modified');
            results.push('Applied CSS and class via chaining');
            
            // Test individual method calls
            $('#test1').html('Modified content');
            results.push('Modified HTML content');
            
            // Test show/hide
            $('#test3').show();
            results.push('Showed hidden element');
            
            // Test query within selection
            const nested = elements.query('#test2');
            results.push(`Found ${nested.length} nested element`);
            
            // Test that Array.prototype is not polluted
            const normalArray = [1, 2, 3];
            const hasQueryMethod = typeof normalArray.query === 'function';
            results.push(`Array.prototype pollution check: ${hasQueryMethod ? 'FAILED' : 'PASSED'}`);
            
            // Display results
            $('#results').html('<h3>Test Results:</h3><ul><li>' + results.join('</li><li>') + '</li></ul>');
        }
    </script>
</body>
</html>
