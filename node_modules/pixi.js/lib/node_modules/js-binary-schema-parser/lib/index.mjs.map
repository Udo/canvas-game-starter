{"version":3,"file":"index.mjs","sources":["../../../../node_modules/js-binary-schema-parser/lib/index.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loop = exports.conditional = exports.parse = void 0;\n\nvar parse = function parse(stream, schema) {\n  var result = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var parent = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : result;\n\n  if (Array.isArray(schema)) {\n    schema.forEach(function (partSchema) {\n      return parse(stream, partSchema, result, parent);\n    });\n  } else if (typeof schema === 'function') {\n    schema(stream, result, parent, parse);\n  } else {\n    var key = Object.keys(schema)[0];\n\n    if (Array.isArray(schema[key])) {\n      parent[key] = {};\n      parse(stream, schema[key], result, parent[key]);\n    } else {\n      parent[key] = schema[key](stream, result, parent, parse);\n    }\n  }\n\n  return result;\n};\n\nexports.parse = parse;\n\nvar conditional = function conditional(schema, conditionFunc) {\n  return function (stream, result, parent, parse) {\n    if (conditionFunc(stream, result, parent)) {\n      parse(stream, schema, result, parent);\n    }\n  };\n};\n\nexports.conditional = conditional;\n\nvar loop = function loop(schema, continueFunc) {\n  return function (stream, result, parent, parse) {\n    var arr = [];\n    var lastStreamPos = stream.pos;\n\n    while (continueFunc(stream, result, parent)) {\n      var newParent = {};\n      parse(stream, schema, result, newParent); // cases when whole file is parsed but no termination is there and stream position is not getting updated as well\n      // it falls into infinite recursion, null check to avoid the same\n\n      if (stream.pos === lastStreamPos) {\n        break;\n      }\n\n      lastStreamPos = stream.pos;\n      arr.push(newParent);\n    }\n\n    return arr;\n  };\n};\n\nexports.loop = loop;"],"names":["parse","conditional","loop"],"mappings":"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","x_google_ignoreList":[0]}